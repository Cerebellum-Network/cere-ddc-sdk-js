flowchart TD
    classDef client fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    classDef sdk fill:#ffcdd2,stroke:#d32f2f,stroke-width:2px
    classDef storage fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    classDef decision fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px,stroke-dasharray: 5 5
    classDef problem fill:#ffebee,stroke:#c62828,stroke-width:3px
    classDef question fill:#fff3e0,stroke:#f57c00,stroke-width:2px,stroke-dasharray: 3 3
    
    %% Title
    Title["Current State: Multiple SDK Complexity Problem"]:::problem
    
    %% Client Applications
    subgraph ClientApps["Client Applications (Developers)"]
        direction TB
        TelegramApps["ğŸ¤– Telegram Mini-Apps<br/>ğŸ“± Telegram Bots"]:::client
        DroneClients["ğŸš Drone Flight Controllers<br/>ğŸ“¡ Drone Telemetry Systems"]:::client
        VideoServices["ğŸ¥ Video Processing Services<br/>ğŸ“º Stream Management"]:::client
        OtherApps["ğŸ”§ Other Internal Services<br/>âš™ï¸ Third-party Integrations"]:::client
    end
    
    %% Decision Complexity
    subgraph DecisionLayer["â“ Developer Decision Complexity"]
        direction TB
        DecisionTitle["Which SDK Should I Use?"]:::decision
        
        Questions["â“ Is this real-time data?<br/>â“ Do I need immediate indexing?<br/>â“ Should data go to Data Cloud directly?<br/>â“ Do I need parallel writes?<br/>â“ What about batching for performance?<br/>â“ How do I handle errors across systems?<br/>â“ Which interface should I learn?"]:::question
    end
    
    %% Current SDK Options
    subgraph CurrentSDKs["Current SDK/API Options"]
        direction LR
        
        subgraph SDKGroup1["Storage-First Approach"]
            DataCloudSDK["ğŸ“¦ Data Cloud SDK<br/>â€¢ Direct storage writes<br/>â€¢ Returns data hash<br/>â€¢ High performance<br/>â€¢ Manual indexing needed"]:::sdk
        end
        
        subgraph SDKGroup2["Event-Driven Approaches"]
            ActivitySDK["âš¡ Activity SDK<br/>â€¢ Event-driven writes<br/>â€¢ Auto-indexes to Data Cloud<br/>â€¢ Real-time processing<br/>â€¢ Event semantics"]:::sdk
            
            HttpAPI["ğŸŒ HTTP API<br/>â€¢ REST interface<br/>â€¢ Also indexes to Data Cloud<br/>â€¢ Web-friendly<br/>â€¢ Different auth model"]:::sdk
        end
    end
    
    %% Complex Routing Patterns
    subgraph ComplexPatterns["Current Complex Integration Patterns"]
        direction TB
        
        Pattern1["ğŸ¤– Telegram Events:<br/>Activity SDK â†’ Indexing â†’ Data Cloud"]
        Pattern2["ğŸ“± Telegram Messages:<br/>HTTP API â†’ Indexing â†’ Data Cloud"]
        Pattern3["ğŸš Drone Telemetry:<br/>PARALLEL: Data Cloud SDK + Activity SDK"]
        Pattern4["ğŸ¥ Video Chunks:<br/>Data Cloud SDK (direct storage)"]
        Pattern5["ğŸ“º Video Events:<br/>Activity SDK (with hash reference)"]
        
        Pattern1:::decision
        Pattern2:::decision
        Pattern3:::decision
        Pattern4:::decision
        Pattern5:::decision
    end
    
    %% Storage Layer
    subgraph StorageSystems["Storage Systems"]
        direction LR
        DataCloud["ğŸ”’ Data Cloud<br/>(Encrypted, Immutable<br/>Source of Truth)"]:::storage
        IndexingLayer["ğŸ” Indexing Layer<br/>(Searchable, AI-Optimized<br/>Query Interface)"]:::storage
    end
    
    %% Problem Indicators
    subgraph ProblemIndicators["âŒ Key Problems"]
        direction TB
        Problem1["ğŸ‘¨â€ğŸ’» Developer Complexity:<br/>Must learn 3 different APIs"]
        Problem2["ğŸ”„ Inconsistent Patterns:<br/>Different interfaces for similar operations"]
        Problem3["âš™ï¸ Client-Side Logic:<br/>Routing decisions embedded in apps"]
        Problem4["ğŸ”§ Maintenance Burden:<br/>Updates require changing multiple apps"]
        Problem5["â— Error Handling:<br/>Different error patterns per SDK"]
        Problem6["ğŸ“Š Monitoring Gaps:<br/>No unified observability"]
        
        Problem1:::problem
        Problem2:::problem
        Problem3:::problem
        Problem4:::problem
        Problem5:::problem
        Problem6:::problem
    end
    
    %% Connections showing complexity
    Title --> ClientApps
    ClientApps --> DecisionLayer
    DecisionLayer --> CurrentSDKs
    CurrentSDKs --> ComplexPatterns
    
    %% Show how each app type connects to different SDKs
    TelegramApps -.-> ActivitySDK
    TelegramApps -.-> HttpAPI
    DroneClients -.-> DataCloudSDK
    DroneClients -.-> ActivitySDK
    VideoServices -.-> DataCloudSDK
    VideoServices -.-> ActivitySDK
    OtherApps -.-> DataCloudSDK
    OtherApps -.-> ActivitySDK
    OtherApps -.-> HttpAPI
    
    %% Storage connections
    DataCloudSDK --> DataCloud
    ActivitySDK --> IndexingLayer
    HttpAPI --> IndexingLayer
    IndexingLayer -.-> DataCloud
    
    %% Problem connections
    DecisionLayer --> ProblemIndicators
    CurrentSDKs --> ProblemIndicators
    ComplexPatterns --> ProblemIndicators
    
    %% Example Decision Flows (showing complexity)
    subgraph ExampleDecisions["Example Developer Decision Tree"]
        direction TB
        StartDecision["I need to store data..."]:::question
        
        Q1["Is it real-time?"]:::question
        Q2["Do I need indexing?"]:::question
        Q3["What about Data Cloud?"]:::question
        Q4["Parallel writes needed?"]:::question
        
        StartDecision --> Q1
        Q1 --> Q2
        Q2 --> Q3
        Q3 --> Q4
        Q4 --> DecisionTitle
    end
    
    ExampleDecisions --> DecisionLayer 